# üì¶ 1.3 Infraestructura: Dependencias (`requirements.txt`)

> **Objetivo**: Justificar cada librer√≠a instalada. En sistemas cr√≠ticos, "menos es m√°s". Cada librer√≠a es un riesgo de seguridad potencial.
> **Archivo**: `requirements.txt`

---

## N√∫cleo del Servidor

### `fastapi>=0.109.0`
El framework web est√°ndar moderno.
*   **Por qu√©**: Soporte nativo as√≠ncrono (`async/await`), validaci√≥n de tipos autom√°tica con Pydantic y generaci√≥n autom√°tica de Swagger UI.

### `granian`
El servidor HTTP (ASGI) escrito en Rust.
*   **Por qu√©**: Reemplazamos `Uvicorn` porque Granian maneja mejor la concurrencia HTTP/2 y WebSockets en hardware limitado (1 CPU).

### `slowapi`
Rate Limiting.
*   **Por qu√©**: Extensi√≥n de `limits` para FastAPI. Nos permite decorar endpoints con `@limiter.limit("5/minute")`. Es simple y usa Redis como backend.

---

## Inteligencia Artificial & Datos

### `litellm>=1.30.0`
La navaja suiza de la IA.
*   **Funci√≥n**: Unifica las APIs de OpenAI, Anthropic, Vertex, Bedrock, Azure, etc. bajo un solo formato (OpenAI format).
*   **Por qu√©**: Nos evita escribir 10 clientes HTTP distintos. Si quieres cambiar de GPT-4 a Claude-3, solo cambias una string, no el c√≥digo.

### `flashrank`
Reranking ligero.
*   **Funci√≥n**: Ordena resultados de b√∫squeda sem√°ntica.
*   **Por qu√©**: Es una reimplementaci√≥n de RankLLM que corre en CPU pura usando ONNX. No necesita Torch pesado ni GPU. Vital para nuestro "Reranker Local".

### `numpy`
C√°lculo num√©rico.
*   **Funci√≥n**: Manejar los vectores (arrays de floats) de los embeddings.

---

## Base de Datos & Cach√©

### `supabase`
Cliente de PostgreSQL as service.
*   **Funci√≥n**: Persistencia de logs, usuarios, recibos.
*   **Por qu√©**: Cliente oficial postgrest-py. (Aunque a futuro recomendamos migrar a `sqlalchemy` async puro para menos dependencia).

### `redis==4.6.0`
Cliente de Redis.
*   **Funci√≥n**: Cach√© distribuido, Rate Limiting y Vector Search.
*   **Versi√≥n**: Fijada en 4.6.0 por estabilidad con `redis-om` si decidimos usarlo a futuro.

---

## Observabilidad

### `opentelemetry-*`
Suite de m√©tricas.
*   **Funci√≥n**: Trazabilidad distribuida.
*   **Por qu√©**: Est√°ndar de la industria (CNCF). Permite mandar datos a Grafana, Datadog o NewRelic sin cambiar c√≥digo.

### `logtail-python`
Logs en la nube (BetterStack).
*   **Funci√≥n**: Env√≠o de logs estructurados.
*   **Por qu√©**: Simple de configurar.

---

## Criptograf√≠a

### `python-jose[cryptography]`
Manejo de JWT (JSON Web Tokens).
*   **Funci√≥n**: Firmar y validar tokens de sesi√≥n.
*   **Por qu√©**: Est√°ndar robusto.

### `cryptography`
Primitivas criptogr√°ficas.
*   **Funci√≥n**: Base para JOSE y hashing seguro.
